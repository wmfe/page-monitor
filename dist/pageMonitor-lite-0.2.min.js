~function(e){var t=e.BDWMMonitor,r=e.location;t("exception",function(){return{run:function(){this.catchException()},catchException:function(){function e(e){var t=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),r=e.toString();return t.indexOf(r)<0&&(t=r+"@"+t),t}window.onerror=function(o,n,a,i,c){var u=o;c&&c.stack&&(u=e(c)),t.report("exception",{tag:"js_error",err_txt:u,url:n,purl:r.href,ln:a,col:i,err_status:401})}}}})}(window),function(e){var t=e.BDWMMonitor,r=e.location;t("net",function(){return{run:function(){this.resourceHook(),this.initXhrHook()},resourceHook:function(){window.addEventListener("error",function(e){var o=e.srcElement||e.target;if(o instanceof HTMLElement){var n=o.tagName.toLowerCase();/script|link|img/.test(n)&&t.report("exception",{tag:"resource_error",url:o.src||o.href,purl:r.href,err_status:"404",err_msg:"Not Found"})}},!0),this.resourceLoadAdapter(!0),this.resourceLoadAdapter(!1)},resourceLoadAdapter:function(t){var r=function(){},o=function(){},n="_resourceLoadSucc",a="_resourceLoadFail",i=t?n:a,c=t?r:o;if(e[i]){var u=e[i];e[i]=function(e){u(e),c(e)}}else e[i]=c},initXhrHook:function(){var e=this;window.XMLHttpRequest&&e.xhrHook(window.XMLHttpRequest),document.addEventListener("DOMContentLoaded",function(t){console.log("????????? net"),e.initjQueryAjaxHook()})},initjQueryAjaxHook:function(){(window.jQuery||window.Zepto)&&$(document).ajaxError(function(e,o,n,a){t.report("exception",{tag:"xhr",url:n.url,method:n.type,purl:r.href,err_status:o.status,err_txt:o.statusText})})},xhrHook:function(t){var r=t.prototype.open,o=t.prototype.send,n=this,a="";t.prototype.open=function(e,t){return this._track={method:e.toLowerCase(),url:t},a="xhr_"+ +new Date,r.apply(this,arguments)},t.prototype.send=function(){return this._trackName=a,e[a]=!0,n.registerComplete(this),o.apply(this,arguments)}},registerComplete:function(e){var t=this;e.addEventListener?e.addEventListener("readystatechange",function(){4==e.readyState&&t.checkComplete(e)},!0):setTimeout(function(){var r=e.onload;e.onload=function(){return t.checkComplete(e),r.apply(e,arguments)};var o=e.onerror;e.onerror=function(){return t.checkComplete(e),o.apply(e,arguments)}},0)},checkComplete:function(o){o._track&&(e[o._trackName]&&o.status>=400&&t.report("exception",{tag:"xhr",url:o._track.url,method:o._track.method,purl:r.href,err_status:o.status,err_txt:o.statusText}),delete o._trackName,delete o._track,delete e[o._trackName])}}})}(window),function(e){function t(e){var t=n.timing,r=t[e+"Start"]?t[e+"Start"]:0,o=t[e+"End"]?t[e+"End"]:0;return{start:r,end:o,value:0<o-r?o-r:0}}function r(e,t,r){if(e.length===+e.length)for(var o=0;o<e.length;o++)t.call(r,o,e[o],e);else for(var n in e)e.hasOwnProperty(n)&&t.call(r,n,e[n],e)}var o=e.BDWMMonitor,n=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance;o("perf",function(){var a={},i={};return{run:function(){this.domHook()},domHook:function(){var e=this;document.onreadystatechange=function(){"complete"===document.readyState&&e.collectPerf()}},collectPerf:function(){n&&(this.collect(),o.report("perf",i))},collect:function(){if(n){var o=n.timing,c=t("navigation"),u=t("request"),d=t("response"),s=t("domainLookup"),l=t("connect"),p=t("loadEvent"),f=(t("unloadEvent"),o.navigationStart);a.p_dns=o.domainLookupEnd,a.p_ct=o.connectEnd,a.p_st=o.responseStart,a.p_tt=o.responseEnd,a.p_dct=o.domComplete,a.p_olt=o.loadEventEnd,r(a,function(e,t){a[e]=Math.max(t-f,0)});var m={p_lookup:s.value,p_tcp:l.value,p_ssl:o.secureConnectionStart>0?o.connectEnd-o.secureConnectionStart:0,p_ttfb:d.start-u.start,p_download:d.value,p_to_download:d.end-c.start,p_to_connect:l.end-c.start,p_dom_ready:o.domComplete-o.domLoading,p_to_dom_ready:o.domComplete-o.navigationStart,p_dom_loaded:p.value,p_to_dom_loaded:p.end-c.start,p_net:u.start-c.start,p_srv:d.end-u.start,p_brw:p.end-o.domLoading};r(a,function(e,t){i[e]=t}),r(m,function(e,t){i[e]=t});var h=["network: "+m.p_net,"server: "+m.p_srv,"browser: "+m.p_brw];e.__perf=h.join("\n")}}}})}(window),~function(e){function t(e){var t=/(chrome)\/(\d+\.\d)/,r=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/,o=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,a=/(mozilla)(?:.*? rv:([\w.]+))?/;e=e.toLowerCase();var i=t.exec(e)||o.exec(e)||n.exec(e)||e.indexOf("compatible")<0&&a.exec(e)||[];return r.exec(e)&&!/chrome/.test(e)&&(i[1]="safari",i[2]=RegExp.$1||RegExp.$2),{browser:i[1]||"unknown",version:i[2]||"0"}}function r(){for(var e=document.body.childNodes,t="",r=e.length-1;r>=0;r--)if(e[r].nodeType==document.COMMENT_NODE){t=e[r].textContent;break}return t}function o(e){var t=!1;return Array.isArray(e)?(e.some(function(e,r){e.test(c.href)&&(t=!0)}),e.length?null:t=!0):t=e==c.href,t}function n(e,t){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function a(){var e=s.q;if(!e)return{};for(var t={},r=0;r<e.length;r++)t[e[r][0]]=e[r][1],console.log(e[r]);return t}var i=e.navigator,c=e.location,u=e.screen,d=e.document,s=e.BDWMMonitor||{};s.url="//log.waimai.baidu.com/static/exceptionjs.gif?",s.beforeReport=function(e,t){return t};var l=a();s.init=function(){var e=l.module,n=l.conf;s._conf={platform:n.platform,app:n.app,channel:n.channel,pageid:n.pageid||0,traceCode:""},n.url?s.url=n.url:null,n.beforeReport?s.beforeReport=n.beforeReport:null,o(n.pageWhiteList)&&e.forEach(function(e,t){s.use(e)});var a=function(){s._conf.traceCode=r()};window.addEventListener("DOMContentLoaded",function(){a(),window.removeEventListener("DOMContentLoaded",a)});var c=t(i.userAgent),d=u.width+"*"+u.height+"|"+u.availWidth+"*"+u.availHeight;"pc"===n.channel&&(s._conf.browser=c.browser+"|"+c.version),s._conf._screen=d},s._module={},s.define=function(e,t){if(s._module[e])throw new Error(e+" Already defined");s._module[e]=t()},s.report=function(e,t){if(console.log("report",arguments),s.url&&e&&t){if(t=s.beforeReport(e,t),!t)throw new Error("Report data is empty");var r=s._conf;if(!r.app||!r.channel||!r.platform)throw new Error("Global report data fragmentary");t=n(r,t);var o=d.createElement("img"),a=s.url,i=[];for(var c in t)i.push(c+"="+encodeURIComponent(t[c]));var u="img_"+ +new Date;s[u]=o,o.onload=o.onerror=function(){s[u]=o=o.onload=o.onerror=null,delete s[u]},o.src=a+(a.indexOf("?")<0?"?":"&")+i.join("&")}},s.error=function(e){s.report("exception",e)},s.use=function(e){s._module[e]?s._module[e].run():l[e]&&(s._module[e]=l[e]())&&s._module[e].run()},s.init()}(window);